<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><meta name="generator" content="MATLAB 2021a"><title>Untitled</title><style type="text/css">.rtcContent { padding: 30px; } .S0 { margin: 2px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.CodeBlock { background-color: #F7F7F7; margin: 10px 0 10px 0;}
.S1 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 1px solid rgb(233, 233, 233); border-bottom: 0px none rgb(0, 0, 0); border-radius: 4px 4px 0px 0px; padding: 6px 45px 0px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S2 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 0px none rgb(0, 0, 0); border-radius: 0px; padding: 0px 45px 0px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S3 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 1px solid rgb(233, 233, 233); border-radius: 0px 0px 4px 4px; padding: 0px 45px 4px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }</style></head><body><div class = rtcContent><div  class = 'S0'><span>geolocated input to a projected and a geographic output</span></div><div  class = 'S0'><span>Input data (latitude, longitude, and snow water equivalent) from the National Water Model are in the file nwm_sample_data as a table.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S1'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">function </span><span >geolocatedDemo()</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">% read the coordinates and the data</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >load(</span><span style="color: rgb(170, 4, 249);">'nwm_sample_data.mat'</span><span >,</span><span style="color: rgb(170, 4, 249);">'Tbl'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">% information for the output UTM projection (for the area of the</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">% Tuolumne River Basin in California)</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">if </span><span >verLessThan(</span><span style="color: rgb(170, 4, 249);">'map'</span><span >,</span><span style="color: rgb(170, 4, 249);">'5.0'</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    m = matfile(</span><span style="color: rgb(170, 4, 249);">'TuolUTM.mat'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    TuolUTM = m.TuolUTM;</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    zone = TuolUTM.zone;</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    v2020b = false;</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">else</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    TuolUTM = projcrs(32611);</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    v2020b = true;</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    zone = </span><span style="color: rgb(170, 4, 249);">'11N'</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">% call rasterReprojection in the geolocated option, specifying a 1 km pixel</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">% size (the native resolution of the National Water Model)</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >[sweTuol,RM] = rasterReprojection(Tbl.swe,[],</span><span style="color: rgb(170, 4, 249);">'OutProj'</span><span >,TuolUTM,</span><span style="color: rgb(170, 4, 249);">'pixelsize'</span><span >,1000,</span><span style="color: rgb(14, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    </span><span style="color: rgb(170, 4, 249);">'latitude'</span><span >,Tbl.lat,</span><span style="color: rgb(170, 4, 249);">'longitude'</span><span >,Tbl.lon); </span><span style="color: rgb(2, 128, 9);">% note that 'adjust' is set to the default, true</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">% display using mapshow</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >figure;</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >subplot(1,2,1)</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >mapshow(sweTuol,RM,</span><span style="color: rgb(170, 4, 249);">'DisplayType'</span><span >,</span><span style="color: rgb(170, 4, 249);">'surface'</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >axis </span><span style="color: rgb(170, 4, 249);">tight</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >colorbar</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >title(</span><span style="color: rgb(170, 4, 249);">'SWE, Tuolumne River Basin (UTM)'</span><span >,</span><span style="color: rgb(170, 4, 249);">'FontName'</span><span >,</span><span style="color: rgb(170, 4, 249);">'calibri'</span><span >,</span><span style="color: rgb(170, 4, 249);">'FontSize'</span><span >,11)</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">if </span><span >v2020b</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    xlabel([</span><span style="color: rgb(170, 4, 249);">'Easting ' </span><span >char(TuolUTM.Name)],</span><span style="color: rgb(170, 4, 249);">'FontName'</span><span >,</span><span style="color: rgb(170, 4, 249);">'calibri'</span><span >,</span><span style="color: rgb(170, 4, 249);">'FontSize'</span><span >,11);</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    ylabel([</span><span style="color: rgb(170, 4, 249);">'Northing ' </span><span >char(TuolUTM.Name)],</span><span style="color: rgb(170, 4, 249);">'FontName'</span><span >,</span><span style="color: rgb(170, 4, 249);">'calibri'</span><span >,</span><span style="color: rgb(170, 4, 249);">'FontSize'</span><span >,11);</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">else</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    xlabel([</span><span style="color: rgb(170, 4, 249);">'UTM Easting, Zone ' </span><span >zone],</span><span style="color: rgb(170, 4, 249);">'FontName'</span><span >,</span><span style="color: rgb(170, 4, 249);">'calibri'</span><span >,</span><span style="color: rgb(170, 4, 249);">'FontSize'</span><span >,11);</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    ylabel([</span><span style="color: rgb(170, 4, 249);">'UTM Northing, Zone ' </span><span >zone],</span><span style="color: rgb(170, 4, 249);">'FontName'</span><span >,</span><span style="color: rgb(170, 4, 249);">'calibri'</span><span >,</span><span style="color: rgb(170, 4, 249);">'FontSize'</span><span >,11);</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">% display using geoshow, by converting projection coordinates back to</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">% lat-lon</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >[x,y] = pixcenters(RM,size(sweTuol),</span><span style="color: rgb(170, 4, 249);">'makegrid'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">try</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    [plotLat,plotLon] = projinv(TuolUTM,x,y);</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    [latlim,lonlim] = projinv(TuolUTM,RM.XWorldLimits,RM.YWorldLimits);</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">catch</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    [plotLat,plotLon] = minvtran(TuolUTM,x,y);</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    [latlim,lonlim] = minvtran(TuolUTM,RM.XWorldLimits,RM.YWorldLimits);</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >delLabel = 0.5;</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >MLabel = round(min(lonlim)):delLabel:round(max(lonlim));</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >PLabel = round(min(latlim)):delLabel:round(max(latlim));</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >subplot(1,2,2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >axesm(</span><span style="color: rgb(170, 4, 249);">'MapProjection'</span><span >,</span><span style="color: rgb(170, 4, 249);">'utm'</span><span >,</span><span style="color: rgb(14, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    </span><span style="color: rgb(170, 4, 249);">'MapLatLimit'</span><span >,latlim,</span><span style="color: rgb(170, 4, 249);">'MapLonLimit'</span><span >,lonlim,</span><span style="color: rgb(14, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    </span><span style="color: rgb(170, 4, 249);">'MLabelLocation'</span><span >,MLabel,</span><span style="color: rgb(170, 4, 249);">'PLabelLocation'</span><span >,PLabel,</span><span style="color: rgb(14, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    </span><span style="color: rgb(170, 4, 249);">'MLineLocation'</span><span >,MLabel,</span><span style="color: rgb(170, 4, 249);">'PLineLocation'</span><span >,PLabel,</span><span style="color: rgb(14, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    </span><span style="color: rgb(170, 4, 249);">'MLabelParallel'</span><span >,</span><span style="color: rgb(170, 4, 249);">'south'</span><span >,</span><span style="color: rgb(14, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    </span><span style="color: rgb(170, 4, 249);">'ParallelLabel'</span><span >,</span><span style="color: rgb(170, 4, 249);">'on'</span><span >,</span><span style="color: rgb(170, 4, 249);">'MeridianLabel'</span><span >,</span><span style="color: rgb(170, 4, 249);">'on'</span><span >,</span><span style="color: rgb(14, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    </span><span style="color: rgb(170, 4, 249);">'MLabelRound'</span><span >,-1,</span><span style="color: rgb(170, 4, 249);">'PLabelRound'</span><span >,-1,</span><span style="color: rgb(14, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    </span><span style="color: rgb(170, 4, 249);">'Grid'</span><span >,</span><span style="color: rgb(170, 4, 249);">'on'</span><span >,</span><span style="color: rgb(14, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >    </span><span style="color: rgb(170, 4, 249);">'FontSize'</span><span >,11,</span><span style="color: rgb(170, 4, 249);">'FontName'</span><span >,</span><span style="color: rgb(170, 4, 249);">'calibri'</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >geoshow(plotLat,plotLon,sweTuol,</span><span style="color: rgb(170, 4, 249);">'DisplayType'</span><span >,</span><span style="color: rgb(170, 4, 249);">'surface'</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >colorbar</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >axis </span><span style="color: rgb(170, 4, 249);">tight</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >title(</span><span style="color: rgb(170, 4, 249);">'SWE, Tuolumne River Basin (lat-lon)'</span><span >,</span><span style="color: rgb(170, 4, 249);">'FontName'</span><span >,</span><span style="color: rgb(170, 4, 249);">'calibri'</span><span >,</span><span style="color: rgb(170, 4, 249);">'FontSize'</span><span >,11)</span></span></div></div><div class="inlineWrapper"><div  class = 'S2'></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">end</span></span></div></div></div>
<br>
<!-- 
##### SOURCE BEGIN #####
function geolocatedDemo()
%  GEOLOCATEDDEMO geolocated input to a projected and a geographic output
% 
% Input data (latitude, longitude, and snow water equivalent) from the National 
% Water Model are in the file nwm_sample_data as a table.
% read the coordinates and the data
load('nwm_sample_data.mat','Tbl');
% information for the output UTM projection (for the area of the
% Tuolumne River Basin in California)
if verLessThan('map','5.0')
    m = matfile('TuolUTM.mat');
    TuolUTM = m.TuolUTM;
    zone = TuolUTM.zone;
    v2020b = false;
else
    TuolUTM = projcrs(32611);
    v2020b = true;
    zone = '11N';
end
% call rasterReprojection in the geolocated option, specifying a 1 km pixel
% size (the native resolution of the National Water Model)
[sweTuol,RM] = rasterReprojection(Tbl.swe,[],'OutProj',TuolUTM,'pixelsize',1000,...
    'latitude',Tbl.lat,'longitude',Tbl.lon); % note that 'adjust' is set to the default, true
% display using mapshow
figure;
subplot(1,2,1)
mapshow(sweTuol,RM,'DisplayType','surface')
axis tight
colorbar
title('SWE, Tuolumne River Basin (UTM)','FontName','calibri','FontSize',11)
if v2020b
    xlabel(['Easting ' char(TuolUTM.Name)],'FontName','calibri','FontSize',11);
    ylabel(['Northing ' char(TuolUTM.Name)],'FontName','calibri','FontSize',11);
else
    xlabel(['UTM Easting, Zone ' zone],'FontName','calibri','FontSize',11);
    ylabel(['UTM Northing, Zone ' zone],'FontName','calibri','FontSize',11);
end
% display using geoshow, by converting projection coordinates back to
% lat-lon
[x,y] = pixcenters(RM,size(sweTuol),'makegrid');
try
    [plotLat,plotLon] = projinv(TuolUTM,x,y);
    [latlim,lonlim] = projinv(TuolUTM,RM.XWorldLimits,RM.YWorldLimits);
catch
    [plotLat,plotLon] = minvtran(TuolUTM,x,y);
    [latlim,lonlim] = minvtran(TuolUTM,RM.XWorldLimits,RM.YWorldLimits);
end
delLabel = 0.5;
MLabel = round(min(lonlim)):delLabel:round(max(lonlim));
PLabel = round(min(latlim)):delLabel:round(max(latlim));
subplot(1,2,2)
axesm('MapProjection','utm',...
    'MapLatLimit',latlim,'MapLonLimit',lonlim,...
    'MLabelLocation',MLabel,'PLabelLocation',PLabel,...
    'MLineLocation',MLabel,'PLineLocation',PLabel,...
    'MLabelParallel','south',...
    'ParallelLabel','on','MeridianLabel','on',...
    'MLabelRound',-1,'PLabelRound',-1,...
    'Grid','on',...
    'FontSize',11,'FontName','calibri')
geoshow(plotLat,plotLon,sweTuol,'DisplayType','surface')
colorbar
axis tight
title('SWE, Tuolumne River Basin (lat-lon)','FontName','calibri','FontSize',11)
end
##### SOURCE END #####
-->
</div></body></html>